<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nanna's 2025 Highlights</title>
    <style>
        :root { --gold: #D4AF37; --bg: #0a0a0a; --card: #161616; --text: #e0e0e0; --success: #27ae60; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; overflow-x: hidden; }
        
        /* Opening Stage */
        #stage-opening { height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; }
        .funky-img { width: 250px; height: 250px; border-radius: 50%; border: 5px solid var(--gold); margin-bottom: 20px; object-fit: cover; }

        /* Dashboard Grid */
        #stage-dashboard { display: none; padding: 40px 20px; max-width: 1000px; margin: 0 auto; animation: fadeIn 1s; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
        
        .tile { 
            background: var(--card); padding: 30px; border-radius: 15px; border: 1px solid #333; 
            text-align: center; cursor: pointer; transition: 0.3s; position: relative;
        }
        .tile.unlocked { border-color: var(--gold); background: #1a1a1a; cursor: default; }
        .tile.locked:hover { border-color: var(--gold); }

        /* Game Overlay */
        #game-overlay { 
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); z-index: 100; justify-content: center; align-items: center; 
        }
        .game-window { background: var(--card); padding: 40px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center; border: 1px solid var(--gold); }

        /* Reveal Content */
        .milestone-reveal { display: none; margin-top: 20px; animation: fadeIn 0.5s; }
        .img-row { display: flex; gap: 10px; justify-content: center; margin-top: 15px; }
        .img-row img { width: 45%; height: 150px; object-fit: cover; border-radius: 8px; }

        /* Buttons & Inputs */
        .btn { background: var(--gold); color: black; border: none; padding: 12px 25px; font-weight: bold; cursor: pointer; border-radius: 5px; margin-top: 15px; text-transform: uppercase; }
        .opt { display: block; width: 100%; padding: 12px; margin: 8px 0; background: #222; border: 1px solid #444; color: white; cursor: pointer; border-radius: 5px; }
        .opt:hover { background: #333; }
        input { padding: 12px; background: #000; border: 1px solid #444; color: white; text-align: center; width: 85%; border-radius: 5px; font-size: 1rem; }
        
        .congrats-text { color: var(--success); font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; display: none; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .movie-tag { padding: 8px 12px; background: #333; border-radius: 5px; cursor: pointer; margin: 5px; display: inline-block; }
        .found { background: var(--gold) !important; color: black !important; text-decoration: line-through; }
    </style>
</head>
<body>

    <div id="stage-opening">
        <img src="funky_nanna.jpg" class="funky-img" onerror="this.src='https://via.placeholder.com/250?text=Nanna'">
        <h1 style="color: var(--gold); letter-spacing: 5px; margin: 0;">HAPPY BIRTHDAY NANNA!</h1>
        <p style="color: #888; margin-bottom: 30px;">2025: The Year of Amazing Memories</p>
        <button class="btn" onclick="goToDashboard()">See Highlights</button>
    </div>

    <div id="stage-dashboard">
        <h2 style="text-align:center; color: var(--gold); margin-bottom: 40px; font-weight: 300; letter-spacing: 3px;">2025 MILESTONES</h2>
        <div class="grid">
            <div class="tile locked" id="tile1" onclick="openGame(1)"><h3>25th Anniversary</h3><div id="rev1" class="milestone-reveal"></div></div>
            <div class="tile locked" id="tile2" onclick="openGame(2)"><h3>Priyanka & VGSoM</h3><div id="rev2" class="milestone-reveal"></div></div>
            <div class="tile locked" id="tile3" onclick="openGame(3)"><h3>Madhav's MBBS</h3><div id="rev3" class="milestone-reveal"></div></div>
            <div class="tile locked" id="tile4" onclick="openGame(4)"><h3>The Hampi Trip</h3><div id="rev4" class="milestone-reveal"></div></div>
            <div class="tile locked" id="tile5" onclick="openGame(5)"><h3>Amma's 50th</h3><div id="rev5" class="milestone-reveal"></div></div>
        </div>

        <div id="final-trigger" style="display:none; text-align:center; margin-top: 60px;">
            <button class="btn" style="background:#27ae60; padding: 20px 40px;" onclick="openGame(6)">Unlock Birthday Messages ‚ù§Ô∏è</button>
        </div>
    </div>

    <div id="stage-finale" style="display:none; padding: 40px 20px; max-width: 900px; margin: 0 auto; text-align:center;">
        <h2 style="color: var(--gold); margin-bottom: 40px;">Messages from the Family</h2>
        <div id="letters-container" style="display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 50px;">
            </div>
        <video id="final-video" controls style="width:100%; max-width:700px; border: 2px solid var(--gold); border-radius: 10px;">
            <source src="birthday_wish.mp4" type="video/mp4">
        </video>
    </div>

    <div id="game-overlay">
        <div class="game-window">
            <div id="congrats" class="congrats-text">GREAT WORK, NANNA!</div>
            <div id="game-content"></div>
        </div>
    </div>

    <script>
        let unlockedCount = 0;
        let subStep = 1;
        const extensions = ['.jpg', '.jpeg', '.JPG', '.JPEG'];

        function goToDashboard() {
            document.getElementById('stage-opening').style.display = 'none';
            document.getElementById('stage-dashboard').style.display = 'block';
        }

        // Helper to load images safely
        function getImgHTML(baseName) {
            return `<div class="img-row">
                <img src="${baseName}1.jpg" onerror="this.src='${baseName}1.jpeg'">
                <img src="${baseName}2.jpg" onerror="this.src='${baseName}2.jpeg'">
            </div>`;
        }

        function openGame(n) {
            if(document.getElementById('tile'+n)?.classList.contains('unlocked')) return;
            const content = document.getElementById('game-content');
            document.getElementById('game-overlay').style.display = 'flex';
            document.getElementById('congrats').style.display = 'none';
            subStep = 1;

            if(n === 1) anniversaryGame();
            else if(n === 2) content.innerHTML = `<h3>VGSoM Riddle</h3><p>Which IIT city is Priyanka studying in?</p><input type="text" id="ans2"><button class="btn" onclick="check(2, 'kharagpur')">Check</button>`;
            else if(n === 3) content.innerHTML = `<h3>Doctor's Path</h3><p>What degree is Madhav doing (4 letters)?</p><input type="text" id="ans3" maxlength="4"><button class="btn" onclick="check(3, 'mbbs')">Check</button>`;
            else if(n === 4) content.innerHTML = `<h3>Family Travels</h3><p>Fill in the blank: Family trip to the ruins of _____.</p><input type="text" id="ans4"><button class="btn" onclick="check(4, 'hampi')">Check</button>`;
            else if(n === 5) content.innerHTML = `<h3>Golden Milestone</h3><p>Unscramble Amma's age: F Y I T F</p><input type="text" id="ans5"><button class="btn" onclick="check(5, 'fifty')">Check</button>`;
            else if(n === 6) filmHunt();
        }

        function anniversaryGame() {
            const content = document.getElementById('game-content');
            const questions = [
                {q: "What color saree did Amma wear?", a: "Rani Pink", o: ["Blue", "Yellow", "Green"]},
                {q: "What were the return gifts?", a: "Silver Coins", o: ["Sweets", "Mugs", "Frames"]},
                {q: "Song Janu & I danced to?", a: "Maahi Ve", o: ["Bole Chudiyan", "Tum Hi Ho", "Dilbar"]},
                {q: "The party game we played?", a: "Finish the Dialogue", o: ["Charades", "Antakshari", "Cards"]}
            ];
            
            let current = questions[subStep-1];
            let opts = [...current.o, current.a].sort(() => Math.random() - 0.5);
            
            content.innerHTML = `<h3>Quest ${subStep}/4</h3><p>${current.q}</p>` + 
                opts.map(opt => `<button class="opt" onclick="${opt === current.a ? (subStep === 4 ? 'win(1)' : 'nextSub()') : 'fail()'}">${opt}</button>`).join('');
        }

        function nextSub() { subStep++; anniversaryGame(); }
        function fail() { alert("Not quite, Nanna! Try again. üòä"); }

        function check(n, correct) {
            if(document.getElementById('ans'+n).value.toLowerCase().includes(correct)) win(n); 
            else fail();
        }

        function win(n) {
            document.getElementById('game-content').innerHTML = "";
            document.getElementById('congrats').style.display = 'block';
            
            setTimeout(() => {
                document.getElementById('game-overlay').style.display = 'none';
                if(n === 6) {
                    document.getElementById('stage-dashboard').style.display = 'none';
                    document.getElementById('stage-finale').style.display = 'block';
                    return;
                }
                const tile = document.getElementById('tile'+n);
                tile.classList.remove('locked'); tile.classList.add('unlocked');
                
                const names = ["anniversary", "vgsom", "madhav", "hampi", "amma"];
                document.getElementById('rev'+n).innerHTML = getImgHTML(names[n-1]);
                document.getElementById('rev'+n).style.display = 'block';
                
                unlockedCount++;
                if(unlockedCount === 5) document.getElementById('final-trigger').style.display = 'block';
            }, 1500);
        }

        function filmHunt() {
            const content = document.getElementById('game-content');
            content.innerHTML = `<h3>Final Movie Hunt</h3><p>Find 10 Telugu Blockbusters of 2025</p>
            <div id="movie-tags">
                ${["GAMECHANGER", "DAAKU", "THANDEL", "MIRAI", "KUBERA", "SANKRANT", "DRAGON", "VEERAMALLU", "HARAHARA", "SWAYAMBHU"]
                .map(m => `<span class="movie-tag" onclick="this.classList.add('found'); checkMovies()">${m}</span>`).join('')}
            </div>`;
        }

        function checkMovies() {
            if(document.querySelectorAll('.found').length === 10) win(6);
        }
    </script>
</body>
</html>
